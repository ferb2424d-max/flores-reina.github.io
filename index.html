<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flores para ti, mi Reina</title>
  <meta name="description" content="Ramo animado de flores violetas — sorpresa para tu reina." />
  <style>
    /* Fuente para el título */
    @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');

    :root{
      --color-fondo-oscuro:#0505056e;
      --color-superposicion-fondo: rgba(10,0,20,0.85);
      --overlay-glow: rgba(255,40,40,0.8);
      --title-color: #ff0067;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      min-height:100vh;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      background-color:var(--color-fondo-oscuro);
      background-image: url('https://www.dropbox.com/scl/fi/2v9cvj88qhkbhcmdfd5w9/back.png?rlkey=jcjesxgfdyylfwqprt13kcz1d&raw=1');
      background-size:cover;
      background-position:center;
      background-attachment:fixed;
      perspective:1000px;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      overflow:hidden;
    }

    /* Title area */
    .title-container{
      position:absolute;
      top:6%;
      left:50%;
      transform:translateX(-50%);
      z-index:1200;
      display:flex;
      align-items:center;
      gap:1rem;
      width:90%;
      max-width:1200px;
      justify-content:center;
      pointer-events:none;
    }
    .main-title{
      font-family:'Great Vibes',cursive;
      color:var(--title-color);
      font-size:clamp(2.2rem,7vw,4.5rem);
      text-shadow: 0 0 8px rgba(230,0,90,0.25), 0 0 18px rgba(255,0,120,0.12);
      margin:0;
      pointer-events:auto;
    }
    .title-image{ width:140px;height:140px;border-radius:50%;object-fit:cover;box-shadow:0 0 18px rgba(0,0,0,0.5); pointer-events:auto }

    /* Night overlay */
    .night{ position:fixed;left:0;top:0;width:100%;height:100%; background:var(--color-superposicion-fondo); z-index: -1;}

    /* --- Bouquet container --- */
    .flowers.bouquet{ position:relative;width:100%;height:80vh; display:flex; align-items:flex-end; justify-content:center; pointer-events:none; z-index:50 }
    .bundle{ position:relative; width:60vmin; height:60vmin; margin-bottom:5vmin; transform-style:preserve-3d; }
    .flowers-row{ position:absolute; inset:0; display:grid; grid-template-columns: repeat(4, 1fr); grid-template-rows:repeat(2,1fr); gap:0.6vmin; align-items:end; justify-items:center; }

    .flower{ position:relative; width:12vmin; height:18vmin; transform-origin:bottom center; }
    .flower__leaf{ position:absolute; bottom:0; left:50%; width:10vmin; height:14vmin; transform-origin:bottom center; border-radius:50% 50% 40% 60%/45% 45% 55% 55%; box-shadow: inset 0 0 2vmin rgba(255,255,255,0.2); }
    .flower__white-circle{ position:absolute; left: -3.5vmin; top:-3vmin; width:9vmin; height:4vmin; border-radius:50%; background:var(--color-centro-flor,#fff8dc); z-index:2 }

    /* Petals base (will be overridden per flower) */
    .petal{ background-image: linear-gradient(180deg,#B57EDC,#663399); filter: drop-shadow(0 0 8px rgba(181,126,220,0.55)); }

    /* Per-flower violet palettes */
    .flower--1 .petal{ background-image: linear-gradient(180deg,#E6E6FA,#9370DB); filter:drop-shadow(0 0 10px rgba(147,112,219,0.45)); }
    .flower--2 .petal{ background-image: linear-gradient(180deg,#BA55D3,#9932CC); filter:drop-shadow(0 0 10px rgba(153,50,204,0.45)); }
    .flower--3 .petal{ background-image: linear-gradient(180deg,#DDA0DD,#9400D3); filter:drop-shadow(0 0 10px rgba(148,0,211,0.45)); }
    .flower--4 .petal{ background-image: linear-gradient(180deg,#C71585,#800080); filter:drop-shadow(0 0 10px rgba(128,0,128,0.45)); }
    .flower--5 .petal{ background-image: linear-gradient(180deg,#DA70D6,#8A2BE2); filter:drop-shadow(0 0 10px rgba(138,43,226,0.45)); }
    .flower--6 .petal{ background-image: linear-gradient(180deg,#B57EDC,#663399); filter:drop-shadow(0 0 10px rgba(102,51,153,0.45)); }
    .flower--7 .petal{ background-image: linear-gradient(180deg,#9B30FF,#4B0082); filter:drop-shadow(0 0 10px rgba(75,0,130,0.45)); }
    .flower--8 .petal{ background-image: linear-gradient(180deg,#D8BFD8,#7A378B); filter:drop-shadow(0 0 10px rgba(122,55,139,0.45)); }

    /* Stems */
    .stems{ position:absolute; bottom:0; left:50%; transform:translateX(-50%); display:flex; gap:0.45vmin; align-items:flex-end; z-index:10; pointer-events:none }
    .stem{ width:0.6vmin; background: linear-gradient(to top,#043a1d,#0a6e2f); border-radius:1vmin; box-shadow:inset 0 0 4px rgba(0,0,0,0.25); transform-origin:bottom center; }
    /* stem heights for natural look */
    .stem--1{ height:46vmin; transform:rotate(-6deg) }
    .stem--2{ height:44vmin; transform:rotate(-3deg) }
    .stem--3{ height:48vmin; transform:rotate(-1deg) }
    .stem--4{ height:50vmin; transform:rotate(0deg) }
    .stem--5{ height:48vmin; transform:rotate(2deg) }
    .stem--6{ height:44vmin; transform:rotate(4deg) }
    .stem--7{ height:42vmin; transform:rotate(7deg) }
    .stem--8{ height:40vmin; transform:rotate(10deg) }
    .stem::after{ content:""; position:absolute; left:-2vmin; bottom:14vmin; width:6vmin; height:10vmin; background: linear-gradient(to top, transparent, #55a630); border-radius:100% 0 100% 0; transform:rotate(-25deg); opacity:0.95; box-shadow: inset 0 2px 1vmin rgba(0,0,0,0.12); }

    /* Sway + grow */
    @keyframes bouquet-sway {
      0%{ transform: rotate(-1deg) translateY(0); }
      25%{ transform: rotate(2deg) translateY(-0.2vmin); }
      50%{ transform: rotate(-2deg) translateY(0.2vmin); }
      75%{ transform: rotate(1deg) translateY(-0.1vmin); }
      100%{ transform: rotate(-1deg) translateY(0); }
    }
    .flower{ animation: bouquet-sway 6s ease-in-out infinite; }
    .flower--1{ animation-delay:0s }
    .flower--2{ animation-delay:0s }
    .flower--3{ animation-delay:0s }
    .flower--4{ animation-delay:0s }
    .flower--5{ animation-delay:0s }
    .flower--6{ animation-delay:0s }
    .flower--7{ animation-delay:0s }
    .flower--8{ animation-delay:0s }

    /* Grow-in effect */
    @keyframes grow-ans { 0%{ transform: scale(0); opacity:0 } 100%{ transform: scale(1); opacity:1 } }
    .flowers-row .flower{ animation: grow-ans 1s ease backwards; }
    .flowers-row .flower:nth-child(1){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(2){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(3){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(4){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(5){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(6){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(7){ animation-delay: 0.6s }
    .flowers-row .flower:nth-child(8){ animation-delay: 0.6s }

    /* Responsiveness */
    @media (max-width:600px){
      .bundle{ width:44vmin;height:44vmin;margin-bottom:4vmin }
      .flower{ width:9vmin;height:13vmin }
      .title-image{ width:110px;height:110px }
      .main-title{ font-size:clamp(1.7rem,8vw,3rem) }
    }

    /* Overlay to start audio */
    #audio-overlay{
      position:fixed;inset:0;background-color:rgba(0,0,0,0.86);z-index:2000;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:opacity .6s ease;
    }
    .overlay-content{text-align:center;color:#fff}
    .overlay-content h2{ font-family:'Great Vibes',cursive; font-size:clamp(1.6rem,5vw,2.6rem); margin-bottom:1rem; text-shadow:0 0 10px rgba(255,255,255,0.12) }
    .overlay-image{ max-width:320px; width:70vw; height:auto; border-radius:20px; animation: heartbeat 1.4s ease-in-out infinite; filter:drop-shadow(0 0 12px rgba(255,40,40,0.6)); }
    @keyframes heartbeat{
      0%{ transform:scale(1) } 30%{ transform:scale(1.14) } 40%{ transform:scale(1.08) } 60%{ transform:scale(1.12) } 100%{ transform:scale(1) }
    }

    /* Music control button */
    #music-control{
      position:fixed; right:18px; bottom:18px; z-index:2100; background: rgba(0,0,0,0.55); color:#fff; border-radius:999px; padding:10px 12px; display:flex; gap:8px; align-items:center; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,0.4)
    }
    #music-control button{ background:transparent; border:0; color:inherit; font-size:18px; cursor:pointer }
    #music-title{ font-size:13px; opacity:0.95 }

    /* Particles background (subtle) */
    .background-particles{ position:fixed; top:0; left:0; width:100%; height:100%; z-index:5; pointer-events:none; overflow:hidden }
    .particle{ position:absolute; bottom:0; width:5px; height:5px; background:rgba(255,255,255,0.35); border-radius:50%; filter:blur(1px); opacity:0; animation:background-sparkle linear infinite }
    @keyframes background-sparkle{ 0%{ transform:translateY(0) scale(1); opacity:.4 } 50%{ opacity:1 } 100%{ transform:translateY(-100vh) scale(1.4); opacity:0 } }
  </style>
</head>
<body>

  <!-- Overlay to start -->
  <div id="audio-overlay">
    <div class="overlay-content">
      <h2>Toca para abrir</h2>
      <img class="overlay-image" src="https://www.dropbox.com/scl/fi/cmqvcdkq1ddgvhzwk2pn6/image.png?rlkey=79mreuh53xqegx80hy6drn77p&raw=1" alt="Tocar para iniciar">
    </div>
  </div>

  <!-- Particles -->
  <div class="background-particles" aria-hidden="true"></div>

  <!-- Audio (Dropbox link adjusted) -->
  <audio id="background-music" src="https://www.dropbox.com/scl/fi/xwln8vheu235xhjgn8exk/AhaTik_null_088a31e2-44ed-43b3-bc00-c0e91a63b45e.mp3?rlkey=7klnqt83at06mgxgkqa6xzomv&st=fkmzcy01&raw=1" loop></audio>

  <!-- Title -->
  <div class="title-container">
    <h1 class="main-title">Flores para ti, mi Reina</h1>
    <img class="title-image" src="https://www.dropbox.com/scl/fi/7j8oh917byqwmdby9or04/IMG-20250416-WA0006.jpg?rlkey=1h887h5r8optmet63suo1y51n&st=q0imsdia&raw=1" alt="Foto especial">
  </div>

  <div class="night" aria-hidden="true"></div>

  <!-- BOUQUET -->
  <div class="flowers bouquet">
    <div class="bundle" role="img" aria-label="Ramo de flores violetas">
      <div class="stems">
        <div class="stem stem--1"></div>
        <div class="stem stem--2"></div>
        <div class="stem stem--3"></div>
        <div class="stem stem--4"></div>
        <div class="stem stem--5"></div>
        <div class="stem stem--6"></div>
        <div class="stem stem--7"></div>
        <div class="stem stem--8"></div>
      </div>

      <div class="flowers-row">
        <div class="flower flower--1">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--2">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--3">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--4">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--5">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--6">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--7">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>

        <div class="flower flower--8">
          <div class="flower__leafs">
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__leaf petal"></div>
            <div class="flower__white-circle"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Music control -->
  <div id="music-control" title="Pausar/Reproducir música" aria-hidden="false" role="region">
    <button id="music-toggle" aria-pressed="false">⏸️</button>
    <div id="music-title">Música: Reproduciendo</div>
  </div>

  <script>
    // DOM elements
    const overlay = document.getElementById('audio-overlay');
    const music = document.getElementById('background-music');
    const toggleBtn = document.getElementById('music-toggle');
    const musicTitle = document.getElementById('music-title');
    const particlesContainer = document.querySelector('.background-particles');

    // Build particles
    const numberOfParticles = 30;
    for (let i=0;i<numberOfParticles;i++){
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.left = (Math.random()*100) + 'vw';
      p.style.animationDuration = (Math.random()*18 + 8) + 's';
      p.style.animationDelay = (Math.random()*6) + 's';
      p.style.opacity = Math.random()*0.7;
      particlesContainer.appendChild(p);
    }

    function startExperience(){
      // try to play music
      const playPromise = music.play();
      if (playPromise !== undefined){
        playPromise.then(()=>{}).catch(err=>{
          console.log("Autoplay prevented — usuario hizo clic, ok.", err);
        });
      }
      // hide overlay
      overlay.style.opacity = 0;
      setTimeout(()=> overlay.style.display='none',700);
    }

    overlay.addEventListener('click', startExperience);

    // Toggle music button
    toggleBtn.addEventListener('click', (e)=>{
      if (music.paused){
        music.play();
        toggleBtn.textContent = '⏸️';
        musicTitle.textContent = 'Música: Reproduciendo';
        toggleBtn.setAttribute('aria-pressed','false');
      } else {
        music.pause();
        toggleBtn.textContent = '▶️';
        musicTitle.textContent = 'Música: Pausada';
        toggleBtn.setAttribute('aria-pressed','true');
      }
    });

    // Optional: pause music automatically after X minutes (if you want)
    // Uncomment and set minutes to auto-pause:
    // const autoPauseMinutes = 10;
    // setTimeout(()=>{ music.pause(); toggleBtn.textContent='▶️'; musicTitle.textContent='Música: Pausada'; }, autoPauseMinutes*60*1000);

    // Accessibility: start with overlay focusable by keyboard
    overlay.tabIndex = 0;
    overlay.addEventListener('keydown', (ev)=>{
      if (ev.key === 'Enter' || ev.key === ' ') startExperience();
    });
  </script>
</body>
</html>